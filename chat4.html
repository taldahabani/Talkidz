<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Character Chat - Talkidz</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      rel="stylesheet"
    />
    <link href="/css/chat.css" rel="stylesheet"/>
    <script
      src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js">
    </script>
</head>
<body>
<div class="splash-container character-loading hidden">
    <div class="splash-content">
        <div class="loading-circle">
            <div class="circle circle-1"></div>
            <div class="circle circle-2"></div>
            <div class="circle circle-3"></div>
        </div>
    </div>
</div>
<div class="top-bar">
    <a href="/" class="back-button">
        <svg width="24" height="24" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
    </a>
    <div class="character-name"></div>
    <!-- Language Selector -->
    <div class="language-select-container">
        <button class="language-select-button" id="languageSelectButton">
            <!-- The active language flag is inserted here via JS -->
            <span class="language-flag" id="currentLanguageFlag"></span>
        </button>
        <div class="language-menu" id="languageMenu">
            <div class="language-menu-content" id="languageMenuContent">
                <!-- Dynamically filled in chat.js -->
            </div>
        </div>
    </div>
    <!-- End Language Selector -->
</div>
<div class="main-container">
    <div class="video-wrapper">
        <div class="background image"></div>
        <video class="background video" id="idleVideo"
               loop muted playsinline disablePictureInPicture></video>
        <video class="background video" id="speakingVideo"
               loop muted playsinline disablePictureInPicture></video>
        <canvas id="videoCanvas" class="video-canvas"></canvas>
        <img id="backgroundImage" class="background-image" src="background.jpg" alt="Background">
    </div>
</div>
<div class="main-action-container">
    <button id="greenScreenButton" class="green-screen-button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="12" cy="12" r="3"/>
        </svg>
    </button>
    <button id="startButton" class="main-button">Start Conversation</button>
    <button class="character-select-button">
        <div class="character-icon">
            <img src="" alt="Selected character"/>
        </div>
    </button>
    <div class="character-menu">
        <div class="character-menu-content"></div>
    </div>
</div>
<canvas id="confetti-canvas"></canvas>
<div class="controls-container">
    <div class="logo-container">
        <a href="/" class="logo">Talkidz</a>
        <span class="logo-byline">by Playbox</span>
    </div>
    <div class="status-indicator">
        <div class="status-dot"></div>
        <span class="status-text">Ready to chat</span>
    </div>
    <div class="controls-right">
        <button class="share-button" onclick="shareCharacter()">
            <svg width="24" height="24" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 12v8a2 2 0 0 0 2 2h12
                         a2 2 0 0 0 2-2v-8"/>
                <polyline points="16 6 12 2 8 6"/>
                <line x1="12" y1="2" x2="12" y2="15"/>
            </svg>
        </button>
    </div>
</div>
<script type="module" src="/js/chat.js"></script>
</body>
</html>
